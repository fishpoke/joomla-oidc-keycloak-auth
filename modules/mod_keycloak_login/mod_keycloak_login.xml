<?xml version="1.0" encoding="utf-8"?>
<extension type="module" client="site" method="upgrade">
    <name>MOD_KEYCLOAK_LOGIN</name>
    <author>CLM Projekt</author>
    <creationDate>2026-01-20</creationDate>
    <version>0.5</version>
    <description>MOD_KEYCLOAK_LOGIN_XML_DESCRIPTION</description>

    <files>
        <filename module="mod_keycloak_login">mod_keycloak_login.php</filename>
        <filename>helper.php</filename>
        <folder>fields</folder>
        <folder>tmpl</folder>
        <folder>language</folder>
        <folder>services</folder>
    </files>

    <languages>
        <language tag="en-GB">language/en-GB/en-GB.mod_keycloak_login.ini</language>
        <language tag="en-GB">language/en-GB/en-GB.mod_keycloak_login.sys.ini</language>
        <language tag="de-DE">language/de-DE/de-DE.mod_keycloak_login.ini</language>
        <language tag="de-DE">language/de-DE/de-DE.mod_keycloak_login.sys.ini</language>
    </languages>

    <config>
        <fields name="params" addfieldpath="modules/mod_keycloak_login/fields">
            <fieldset name="basic" label="MOD_KEYCLOAK_LOGIN_FIELDSET_BASIC">
                <field
                    name="keycloak_base_url"
                    type="keycloakbaseurl"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_BASE_URL_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_BASE_URL_DESC"
                />
                <field
                    name="realm"
                    type="keycloakrealm"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_REALM_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_REALM_DESC"
                />
                <field
                    name="forgot_password_path"
                    type="keycloakpath"
                    default="/realms/{realm}/login-actions/reset-credentials"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_FORGOT_PASSWORD_PATH_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_FORGOT_PASSWORD_PATH_DESC"
                />
                <field
                    name="forgot_link_enabled"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="1"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_FORGOT_LINK_ENABLED_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_FORGOT_LINK_ENABLED_DESC"
                >
                    <option value="0">JDISABLED</option>
                    <option value="1">JENABLED</option>
                </field>
                <field
                    name="register_path"
                    type="keycloakpath"
                    default="/realms/{realm}/login-actions/registration"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_REGISTER_PATH_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_REGISTER_PATH_DESC"
                />
                <field
                    name="register_link_enabled"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="1"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_REGISTER_LINK_ENABLED_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_REGISTER_LINK_ENABLED_DESC"
                >
                    <option value="0">JDISABLED</option>
                    <option value="1">JENABLED</option>
                </field>
                <field
                    name="context"
                    type="list"
                    default="auto"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_CONTEXT_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_CONTEXT_DESC"
                >
                    <option value="auto">MOD_KEYCLOAK_LOGIN_CONTEXT_AUTO</option>
                    <option value="site">MOD_KEYCLOAK_LOGIN_CONTEXT_SITE</option>
                    <option value="admin">MOD_KEYCLOAK_LOGIN_CONTEXT_ADMIN</option>
                </field>
                <field
                    name="return_url"
                    type="url"
                    default=""
                    label="MOD_KEYCLOAK_LOGIN_FIELD_RETURN_URL_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_RETURN_URL_DESC"
                />

                <field
                    name="info_link_enabled"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="0"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_ENABLED_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_ENABLED_DESC"
                >
                    <option value="0">JDISABLED</option>
                    <option value="1">JENABLED</option>
                </field>

                <field
                    name="info_article_id"
                    type="modal_article"
                    default="0"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_INFO_ARTICLE_ID_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_INFO_ARTICLE_ID_DESC"
                />

                <field
                    name="info_link_text"
                    type="text"
                    default=""
                    label="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_TEXT_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_TEXT_DESC"
                />

                <field
                    name="info_link_color"
                    type="color"
                    default=""
                    label="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_COLOR_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_INFO_LINK_COLOR_DESC"
                />

                <field
                    name="account_link_enabled"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="0"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_ACCOUNT_LINK_ENABLED_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_ACCOUNT_LINK_ENABLED_DESC"
                >
                    <option value="0">JDISABLED</option>
                    <option value="1">JENABLED</option>
                </field>

                <field
                    name="account_path"
                    type="keycloakpath"
                    default="/realms/{realm}/account"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_ACCOUNT_PATH_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_ACCOUNT_PATH_DESC"
                />

                <field
                    name="keycloak_logout_checkbox_enabled"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="0"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_LOGOUT_CHECKBOX_ENABLED_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_LOGOUT_CHECKBOX_ENABLED_DESC"
                >
                    <option value="0">JDISABLED</option>
                    <option value="1">JENABLED</option>
                </field>

                <field
                    name="keycloak_logout_checkbox_default"
                    type="radio"
                    layout="joomla.form.field.radio.switcher"
                    default="0"
                    label="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_LOGOUT_CHECKBOX_DEFAULT_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_KEYCLOAK_LOGOUT_CHECKBOX_DEFAULT_DESC"
                >
                    <option value="0">JNO</option>
                    <option value="1">JYES</option>
                </field>

                <field
                    name="login_button_text"
                    type="text"
                    default=""
                    label="MOD_KEYCLOAK_LOGIN_FIELD_LOGIN_BUTTON_TEXT_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_LOGIN_BUTTON_TEXT_DESC"
                />

                <field
                    name="logout_button_text"
                    type="text"
                    default=""
                    label="MOD_KEYCLOAK_LOGIN_FIELD_LOGOUT_BUTTON_TEXT_LABEL"
                    description="MOD_KEYCLOAK_LOGIN_FIELD_LOGOUT_BUTTON_TEXT_DESC"
                />
            </fieldset>
        </fields>
    </config>
</extension>
